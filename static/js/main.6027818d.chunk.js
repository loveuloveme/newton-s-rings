(this.webpackJsonpgraph=this.webpackJsonpgraph||[]).push([[0],{151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(3),i=a.n(r),s=a(41),c=a.n(s),o=(a(51),a(42)),l=a(43),u=a(45),h=a(44),d=a(24),g=(a(151),a(25)),m=a(4);function f(e){return Object(n.jsxs)("div",{className:"image-selector__item",onClick:function(){e.onClick(e.id)},children:[Object(n.jsx)("img",{src:"/newton-s-rings"+e.url,className:"apple-shadow"}),Object(n.jsx)("span",{className:"image-selector__item-name",children:e.name})]})}var b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).canvasRef=i.a.createRef(),n.fileRef=i.a.createRef(),n.state={bg:"",dataIntense:new Array(1280).fill(0),dataMinMax:[],mainColor:"",images:[{name:"435",url:"/ringsImages/zero435.bmp"},{name:"546",url:"/ringsImages/zero546.bmp"},{name:"578",url:"/ringsImages/zero578.bmp"},{name:"630",url:"/ringsImages/zero630.bmp"}]},n}return Object(l.a)(a,[{key:"_handleFileSelected",value:function(e){this._loadImage(e)}},{key:"_loadImage",value:function(e){var t=this;try{var a=this.canvasRef.current.getContext("2d"),n=new Image;n.onload=function(){a.drawImage(n,0,0,1280,960),t._calc()},n.src=URL.createObjectURL(e.target.files[0]),this.setState({bg:n.src})}catch(e){alert("Something went wrong")}}},{key:"_loadImageUrl",value:function(e){var t=this;try{var a=this.canvasRef.current.getContext("2d"),n=new Image;n.onload=function(){a.drawImage(n,0,0,1280,960),t._calc()},n.src="/newton-s-rings"+this.state.images[e].url,this.setState({bg:n.src})}catch(r){alert("Something went wrong")}}},{key:"_calc",value:function(){for(var e=this.canvasRef.current.getContext("2d"),t=[],a=0;a<1280;a++)t.push(e.getImageData(a,940,1,1).data);this.setState({dataIntense:Object(g.processData)(t).intense,dataMinMax:Object(g.processData)(t).minMax,mainColor:Object(m.getAverageRGB)(e.getImageData(0,0,1280,960))})}},{key:"_clickAdd",value:function(){this.fileRef.current.click()}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("section",{children:[Object(n.jsxs)("div",{style:{marginRight:0},children:[Object(n.jsx)("div",{className:"section-name",children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(n.jsxs)("div",{className:"canvas apple-shadow",style:{backgroundImage:"url(".concat(this.state.bg,")")},onClick:this._clickAdd.bind(this),children:[Object(n.jsx)("input",{className:"canvas-input",onChange:this._handleFileSelected.bind(this),ref:this.fileRef,type:"file"}),Object(n.jsx)("canvas",{ref:this.canvasRef,width:"1280",height:"960"}),""==this.state.bg?Object(n.jsx)("div",{className:"canvas-add-image",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}):Object(n.jsx)(n.Fragment,{})]}),Object(n.jsx)("div",{className:"image-selector",children:this.state.images.map((function(t,a){return Object(n.jsx)(f,{url:t.url,name:t.name,onClick:e._loadImageUrl.bind(e),id:a},a)}))})]}),Object(n.jsxs)("div",{className:"graph-wrapper",style:{marginLeft:0},children:[Object(n.jsx)("div",{className:"section-name",children:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"}),Object(n.jsx)("div",{className:"graph apple-shadow",children:Object(n.jsx)(d.Line,{data:Object(m.generateData)(this.state.dataIntense,this.state.mainColor,this.state.dataMinMax),options:{maintainAspectRatio:!1}})}),Object(n.jsxs)("div",{className:"graph apple-shadow",children:[Object(n.jsx)("div",{className:"equa",children:"f(x) = "+(Object(m.generateMinLineData)(this.state.dataMinMax).a?Object(m.generateMinLineData)(this.state.dataMinMax).a:"?")+"x + "+(Object(m.generateMinLineData)(this.state.dataMinMax).a?Object(m.generateMinLineData)(this.state.dataMinMax).b:"?")}),Object(n.jsx)(d.Line,{data:Object(m.generateMinData)(this.state.dataMinMax),options:{maintainAspectRatio:!1}})]})]})]})})}}]),a}(i.a.Component),p=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,153)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))};c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root")),p()},25:function(e,t){function a(e){for(var t=0;t<e.length;t+=4){var a=parseInt(.34*e[t]+.5*e[t+1]+.16*e[t+2]);e[t]=a,e[t+1]=a,e[t+2]=a}return e}function n(e){function t(){var e=this;this.max=null,this.min=null,this.maxX=null,this.minX=null,this.calc=function(){return(e.max-e.min)/(e.max+e.min)},this.getX=function(){return(e.maxX+e.minX)/2}}for(var a=[],n=1;n<e.length-1;n++)if(e[n]>e[n+1]&&e[n]>e[n-1])0==a.length&&a.push(new t),a[a.length-1].max=e[n],a[a.length-1].maxX=n;else if(e[n]<e[n+1]&&e[n]<e[n-1]){if(0==a.length)continue;if(null==a[a.length-1].max)continue;a[a.length-1].min=e[n],a[a.length-1].minX=n,a.push(new t)}var r=Number.MIN_VALUE,i=-1;for(n=0;n<a.length;n++)a[n].max-a[n].min>=r&&(r=a[n].max-a[n].min,i=n);if(-1!=i){var s=[];for(n=0;n<i;n++)s.push(a[n]);return s}return a}e.exports={processData:function(e){for(var t=Number.MAX_VALUE,r=0,i=[],s=0;s<e.length;s++){var c=a(e[s])[0];c<t&&(t=c),c>r&&(r=c),i.push(c)}var o=n(i=function(e,t){for(var a=[],n=50;n<e.length;n++){for(var r=0,i=n-t;i<=n+t;i++)r+=e[i<0?i+e.length:i%e.length];a[n]=r/(2*t+1)}return a}(i,10)),l=(o[o.length-1].maxX+o[o.length-1].minX)/2;for(s=50;s<i.length;s++);var u=[];if(-1!=l){for(s=0;s<Math.floor(l);s++)u.push(i[s]);return{intense:u,minMax:o}}return{intense:i,minMax:o}},minMax:n}},4:function(e,t){function a(e){for(var t=[],a=0;a<=e.length;a++)t.push(a);return t}function n(e){for(var t=[],a=0;a<e.length;a++)t.push({x:e[a].maxX,y:e[a].calc(),r:1}),t.push({x:e[a].minX,y:e[a].calc(),r:1});if(0==t.length)return[];var n,r,i=[],s=[],c=[],o=[],l=[],u=[];t.forEach((function(e){i.push(e.x),s.push(e.y)})),n=i.reduce((function(e,t){return e+t}),0),r=s.reduce((function(e,t){return e+t}),0),i.forEach((function(e){c.push(e-n),l.push((e-n)*(e-n))})),s.forEach((function(e,t){o.push(e-r),u.push(o[t]*c[t])}));var h=u.reduce((function(e,t){return e+t}),0)/l.reduce((function(e,t){return e+t}),0);return{a:h,b:r-n*h}}e.exports={generateData:function(e,t,n){for(var r=[],i=[],s=0;s<n.length;s++)r.push(n[s].calc()),r.push(n[s].calc()),i.push(n[s].maxX),i.push(n[s].minX);return{labels:a(e),datasets:[{type:"line",label:"\u0418\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u043e\u0441\u0442\u044c",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:t,borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:t,pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:e}]}},generateMinData:function(e){for(var t=[],a=0;a<e.length;a++)t.push({x:e[a].maxX,y:e[a].calc(),r:1}),t.push({x:e[a].minX,y:e[a].calc(),r:1});var r=n(e),i=function(e,t,a){if(0==a.length)return[];for(var n=[],r=[],i=a[a.length-1].x,s=0;s<Math.floor(i);s+=1)r.push(s),n.push(e*s+t);return{labelMin:r,dataMin:n}}(r.a,r.b,t);return{labels:i.labelMin,datasets:[{type:"bubble",label:"V",fill:!1,backgroundColor:"#e74c3c",borderColor:"#c0392b",borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:"#c0392b",pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:t},{type:"line",label:"V(\u0410\u043f\u043f\u0440\u043e\u043a\u0441\u0438\u043c\u0430\u0446\u0438\u044f)",fill:!1,backgroundColor:"#3498db",borderColor:"#3498db",borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:"#3498db",pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i.dataMin}]}},getAverageRGB:function(e){var t,a=-4,n={r:0,g:0,b:0},r=0;for(960,1280,t=e.data.length;(a+=20)<t;)++r,n.r+=e.data[a],n.g+=e.data[a+1],n.b+=e.data[a+2];return n.r=~~(n.r/r),n.g=~~(n.g/r),n.b=~~(n.b/r),"rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")},generateMinLineData:n}},51:function(e,t,a){}},[[152,1,2]]]);
//# sourceMappingURL=main.6027818d.chunk.js.map