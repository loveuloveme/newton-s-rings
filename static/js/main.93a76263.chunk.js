(this.webpackJsonpgraph=this.webpackJsonpgraph||[]).push([[0],{151:function(t,e,a){},152:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(3),i=a.n(r),o=a(41),s=a.n(o),c=(a(51),a(42)),l=a(43),u=a(45),h=a(44),d=a(24),f=(a(151),a(25)),g=a(4),b=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).canvasRef=i.a.createRef(),n.fileRef=i.a.createRef(),n.state={bg:"",dataIntense:new Array(1280).fill(0),dataMinMax:[],mainColor:""},n}return Object(l.a)(a,[{key:"_handleFileSelected",value:function(t){this._loadImage(t)}},{key:"_loadImage",value:function(t){var e=this;try{var a=this.canvasRef.current.getContext("2d"),n=new Image;n.onload=function(){a.drawImage(n,0,0,1280,960),e._calc()},n.src=URL.createObjectURL(t.target.files[0]),this.setState({bg:n.src})}catch(t){alert("Something went wrong")}}},{key:"_calc",value:function(){for(var t=this.canvasRef.current.getContext("2d"),e=[],a=0;a<1280;a++)e.push(t.getImageData(a,940,1,1).data);this.setState({dataIntense:Object(f.processData)(e).intense,dataMinMax:Object(f.processData)(e).minMax,mainColor:Object(g.getAverageRGB)(t.getImageData(0,0,1280,960))})}},{key:"_clickAdd",value:function(){this.fileRef.current.click()}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("section",{children:[Object(n.jsxs)("div",{className:"canvas",style:{backgroundImage:"url(".concat(this.state.bg,")")},onClick:this._clickAdd.bind(this),children:[Object(n.jsx)("input",{className:"canvas-input",onChange:this._handleFileSelected.bind(this),ref:this.fileRef,type:"file"}),Object(n.jsx)("canvas",{ref:this.canvasRef,width:"1280",height:"960"}),""==this.state.bg?Object(n.jsx)("div",{className:"canvas-add-image",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}):Object(n.jsx)(n.Fragment,{})]}),Object(n.jsxs)("div",{className:"graph-wrapper",children:[Object(n.jsx)("div",{className:"graph",children:Object(n.jsx)(d.Line,{data:Object(g.generateData)(this.state.dataIntense,this.state.mainColor,this.state.dataMinMax),options:{maintainAspectRatio:!1}})}),Object(n.jsxs)("div",{className:"graph",children:[Object(n.jsx)("div",{className:"equa",children:"f(x) = "+(Object(g.generateMinLineData)(this.state.dataMinMax).a?Object(g.generateMinLineData)(this.state.dataMinMax).a:"?")+"x + "+(Object(g.generateMinLineData)(this.state.dataMinMax).a?Object(g.generateMinLineData)(this.state.dataMinMax).b:"?")}),Object(n.jsx)(d.Line,{data:Object(g.generateMinData)(this.state.dataMinMax),options:{maintainAspectRatio:!1}})]})]})]})})}}]),a}(i.a.Component),p=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,153)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;a(t),n(t),r(t),i(t),o(t)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root")),p()},25:function(t,e){function a(t){for(var e=0;e<t.length;e+=4){var a=parseInt(.34*t[e]+.5*t[e+1]+.16*t[e+2]);t[e]=a,t[e+1]=a,t[e+2]=a}return t}function n(t){function e(){var t=this;this.max=null,this.min=null,this.maxX=null,this.minX=null,this.calc=function(){return(t.max-t.min)/(t.max+t.min)},this.getX=function(){return(t.maxX+t.minX)/2}}for(var a=[],n=1;n<t.length-1;n++)if(t[n]>t[n+1]&&t[n]>t[n-1])0==a.length&&a.push(new e),a[a.length-1].max=t[n],a[a.length-1].maxX=n;else if(t[n]<t[n+1]&&t[n]<t[n-1]){if(0==a.length)continue;if(null==a[a.length-1].max)continue;a[a.length-1].min=t[n],a[a.length-1].minX=n,a.push(new e)}var r=Number.MIN_VALUE,i=-1;for(n=0;n<a.length;n++)a[n].max-a[n].min>=r&&(r=a[n].max-a[n].min,i=n);if(-1!=i){var o=[];for(n=0;n<i;n++)o.push(a[n]);return o}return a}t.exports={processData:function(t){for(var e=Number.MAX_VALUE,r=0,i=[],o=0;o<t.length;o++){var s=a(t[o])[0];s<e&&(e=s),s>r&&(r=s),i.push(s)}var c=n(i=function(t,e){for(var a=[],n=50;n<t.length;n++){for(var r=0,i=n-e;i<=n+e;i++)r+=t[i<0?i+t.length:i%t.length];a[n]=r/(2*e+1)}return a}(i,10));console.log(i);var l=(c[c.length-1].maxX+c[c.length-1].minX)/2;for(o=50;o<i.length;o++);var u=[];if(-1!=l){for(o=0;o<Math.floor(l);o++)u.push(i[o]);return{intense:u,minMax:c}}return{intense:i,minMax:c}},minMax:n}},4:function(t,e){function a(t){for(var e=[],a=0;a<=t.length;a++)e.push(a);return e}function n(t){for(var e=[],a=0;a<t.length;a++)e.push({x:t[a].maxX,y:t[a].calc(),r:1}),e.push({x:t[a].minX,y:t[a].calc(),r:1});if(0==e.length)return[];var n,r,i=[],o=[],s=[],c=[],l=[],u=[];e.forEach((function(t){i.push(t.x),o.push(t.y)})),n=i.reduce((function(t,e){return t+e}),0),r=o.reduce((function(t,e){return t+e}),0),i.forEach((function(t){s.push(t-n),l.push((t-n)*(t-n))})),o.forEach((function(t,e){c.push(t-r),u.push(c[e]*s[e])}));var h=u.reduce((function(t,e){return t+e}),0)/l.reduce((function(t,e){return t+e}),0);return{a:h,b:r-n*h}}t.exports={generateData:function(t,e,n){for(var r=[],i=[],o=0;o<n.length;o++)r.push(n[o].calc()),r.push(n[o].calc()),i.push(n[o].maxX),i.push(n[o].minX);return{labels:a(t),datasets:[{type:"line",label:"\u0418\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u043e\u0441\u0442\u044c",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:e,borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:e,pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:t}]}},generateMinData:function(t){for(var e=[],a=0;a<t.length;a++)e.push({x:t[a].maxX,y:t[a].calc(),r:1}),e.push({x:t[a].minX,y:t[a].calc(),r:1});var r=n(t),i=function(t,e,a){if(0==a.length)return[];for(var n=[],r=[],i=a[a.length-1].x,o=0;o<Math.floor(i);o+=1)r.push(o),n.push(t*o+e);return{labelMin:r,dataMin:n}}(r.a,r.b,e);return{labels:i.labelMin,datasets:[{type:"bubble",label:"V",fill:!1,backgroundColor:"#e74c3c",borderColor:"#c0392b",borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:"#c0392b",pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:e},{type:"line",label:"V(\u0410\u043f\u043f\u0440\u043e\u043a\u0441\u0438\u043c\u0430\u0446\u0438\u044f)",fill:!1,backgroundColor:"#3498db",borderColor:"#3498db",borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:"#3498db",pointBorderWidth:1,pointHoverRadius:1,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i.dataMin}]}},getAverageRGB:function(t){var e,a=-4,n={r:0,g:0,b:0},r=0;for(960,1280,e=t.data.length;(a+=20)<e;)++r,n.r+=t.data[a],n.g+=t.data[a+1],n.b+=t.data[a+2];return n.r=~~(n.r/r),n.g=~~(n.g/r),n.b=~~(n.b/r),"rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b,")")},generateMinLineData:n}},51:function(t,e,a){}},[[152,1,2]]]);
//# sourceMappingURL=main.93a76263.chunk.js.map